# Enabling Progressive Server-Side Rendering for Traditional Web Template Engines with Java Virtual Threads
Pereira, B.; Carvalho, F.M. Enabling *Progressive Server-Side Rendering* for Traditional *Template Engines* with *Java Virtual Threads*. *Software* 2025, 4, 20. https://doi.org/10.3390/software4030020.

## 1. Fichamento de Conteúdo

O artigo aborda o desafio de otimizar o desempenho e a escalabilidade de aplicações *web* modernas, focando na técnica de *Progressive Server-Side Rendering* (*PSSR*). O *PSSR* combina os benefícios do *Server-Side Rendering* (*SSR*) e do *Client-Side Rendering* (*CSR*) ao fazer o *streaming* progressivo de conteúdo *HTML*, melhorando os tempos de carregamento percebidos pelo usuário. O problema central é que muitos *template engines* (motores de *templates*) tradicionais, que usam *DSLs* externos (Linguagens de Domínio Específico) e a interface de bloqueio *Iterable*, são incompatíveis com os contextos assíncronos e não bloqueantes exigidos pelo *PSSR* em ambientes de alta concorrência. O método de investigação analisa se as *threads* virtuais do Java, podem permitir a execução não bloqueante dessas operações de *I/O* de bloqueio, viabilizando o *PSSR* com *template engines* legados sem a necessidade de modelos complexos de programação assíncrona, como *reactive programming* ou *coroutines*. O trabalho compara o desempenho de múltiplos *template engines* em arquiteturas *Spring WebFlux*, *Spring MVC* e *Quarkus*. Os resultados demonstram que as *virtual threads* permitem que *template engines* bloqueantes escalem de maneira comparável àquelas projetadas para *I/O* não bloqueante, alcançando alto *throughput* (vazão) e responsividade sob carga. A conclusão é que as *virtual threads* simplificam significativamente a implementação do *PSSR* com *templates HTML* familiares, mantendo um desempenho competitivo. As *virtual threads* (*Virtual approach*) nos *benchmarks* (*testes de desempenho*) demonstraram escalabilidade comparável ou superior às abordagens *Reactive* e *Suspendable* em *Spring WebFlux* e *Quarkus* sob alta concorrência. Por exemplo, no *Quarkus* com *Presentation Class*, a abordagem *Virtual* alcançou 4856 *requests per second* (*RPS*). Na comparação direta com *HtmlFlow*, as abordagens *Virtual* (4691 *RPS*), *Reactive* (4792 *RPS*) e *Suspendable* (4487 *RPS*) tiveram desempenho similar. O uso de *virtual threads* em *Spring MVC* (2797 *RPS*) foi superior ao *Blocking* (*platform threads*) (2498 *RPS*), mas não atingiu a escalabilidade dos *frameworks* reativos.

## 2. Fichamento Bibliográfico

*   *Server-Side Rendering* (*SSR*) vs. *Client-Side Rendering* (*CSR*): *SSR* gera o conteúdo *HTML* no servidor, resultando em um *First Contentful Paint* (*FCP*) mais rápido e melhor *SEO* (*Search Engine Optimization*). No entanto, pode aumentar a carga do servidor e reduzir o *throughput*. *CSR* transfere a carga de renderizamento para o navegador, reduzindo a carga do servidor, mas podendo levar a um *FCP* mais lento.
*   *Progressive Server-Side Rendering* (*PSSR*): técnica que otimiza a *perceived performance* (desempenho percebido) ao fazer *streaming* progressivo do conteúdo *HTML*. O *PSSR* retém todas as responsabilidades de renderizamento no servidor, ao contrário do *CSR*, e permite que o conteúdo seja visto progressivamente, reduzindo o *time-to-first-byte* (*TTFB*).
*   *Template Engines Limitation* Tradicionais: muitos *template engines* legados, que usam *DSLs* externos, dependem de interfaces de bloqueio como *Iterable*. Esse comportamento de bloqueio faz com que as *platform threads* (*threads* de plataforma) permaneçam ociosas (*idle*) até que toda a saída *HTML* esteja pronta, minando os benefícios do *I/O* não bloqueante e limitando a escalabilidade.
*   Arquiteturas de Servidor e *PSSR*: O *PSSR* requer *template engines* compatíveis com modelos de dados assíncronos. Enquanto *Spring WebFlux* (*low-thread, event-driven*) e *Quarkus* (baseado em *Vert.x*) suportam *PSSR* nativamente ou com configuração de *buffer*, o *Spring MVC* (modelo *thread-per-request*) não o suporta efetivamente para os *templates* testados.

## 3. Fichamento de Citações

*   "*Progressive Server-Side Rendering (PSSR) bridges the gap between Server-Side Rendering and Client-Side Rendering by progressively streaming HTML content, improving perceived load times*."
*   "*Results show that virtual threads allow blocking engines to scale comparably to those designed for non-blocking I/O, achieving high throughput and responsiveness under load*."
*   "*The server initially sends a minimal HTML document to the client and subsequently streams additional HTML fragments. Even so, unlike CSR, PSSR retains all rendering responsibilities on the server side, thereby reducing the load on the client*.
*   "*With the introduction of virtual threads... in Java 21, it is now possible to execute blocking I/O operations in a scalable, lightweight manner*."
*   "*The primary advantage of virtual threads lies in their ability to eliminate the need for complex asynchronous programming models*."
*   "*When a virtual thread performs a blocking I/O operation, the JVM intercepts the call and transparently parks the virtual thread, freeing the underlying platform thread to perform other tasks*."
*   "*The framework-specific variations observed in our results—particularly the performance differences between Spring WebFlux and Quarkus implementations—suggest that the underlying reactive runtime architecture significantly influences the effectiveness of each approach*."
*   "*Our benchmarks across Spring WebFlux, Spring MVC, and Quarkus show that synchronous non-blocking execution using virtual threads consistently delivers performance comparable to asynchronous non-blocking approaches under high concurrency*."